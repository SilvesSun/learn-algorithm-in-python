# ç»™å®šä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ nums ï¼Œ è¿”å›æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•° ã€‚
#
#  æ³¨æ„ è¿™ä¸ªæ•°åˆ—å¿…é¡»æ˜¯ ä¸¥æ ¼ é€’å¢çš„ã€‚
#
#
#
#  ç¤ºä¾‹ 1:
#
#
# è¾“å…¥: [1,3,5,4,7]
# è¾“å‡º: 2
# è§£é‡Š: æœ‰ä¸¤ä¸ªæœ€é•¿é€’å¢å­åºåˆ—ï¼Œåˆ†åˆ«æ˜¯ [1, 3, 4, 7] å’Œ[1, 3, 5, 7]ã€‚
#
#
#  ç¤ºä¾‹ 2:
#
#
# è¾“å…¥: [2,2,2,2,2]
# è¾“å‡º: 5
# è§£é‡Š: æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦æ˜¯1ï¼Œå¹¶ä¸”å­˜åœ¨5ä¸ªå­åºåˆ—çš„é•¿åº¦ä¸º1ï¼Œå› æ­¤è¾“å‡º5ã€‚
#
#
#
#
#  æç¤º:
#
#
#
#
#  1 <= nums.length <= 2000
#  -10â¶ <= nums[i] <= 10â¶
#
#  Related Topics æ ‘çŠ¶æ•°ç»„ çº¿æ®µæ ‘ æ•°ç»„ åŠ¨æ€è§„åˆ’ ğŸ‘ 541 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
from typing import List


class Solution:
    def findNumberOfLIS(self, nums: List[int]) -> int:
        """
        dp[i] è¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—
        count[i] è¡¨ç¤ºä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—ä¸ªæ•°

        çŠ¶æ€è½¬ç§»:
        å¯¹äºæ¯ä¸€ä¸ªæ•°nums[i]ï¼Œçœ‹åœ¨å®ƒä¹‹å‰çš„æ•°nums[j](0<= j < i)æ˜¯å¦æ¯”å½“å‰æ•°nums[i]å°ï¼Œ
        å¦‚æœnums[i] > nums[j]ï¼Œé‚£ä¹ˆç›¸å½“äºåˆ°nums[j]ä¸ºæ­¢çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦åˆ°nums[i]å¢åŠ äº†1ï¼Œ
        åˆ°nums[i]ä¸ºæ­¢çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦å°±å˜æˆäº†dp[i] = dp[j] + 1ï¼›ä½†æ˜¯å› ä¸ºæ»¡è¶³nums[i] > nums[j] çš„nums[j]ä¸æ­¢ä¸€ä¸ªï¼Œ
        dp[i]åº”è¯¥å–è¿™äº›dp[j] + 1çš„æœ€å¤§å€¼ï¼Œå¹¶ä¸”è¿™äº›dp[j] + 1è¿˜ä¼šæœ‰ç›¸ç­‰çš„æƒ…å†µï¼Œä¸€æ—¦ç›¸ç­‰ï¼Œåˆ°nums[i]ä¸ºæ­¢çš„æœ€é•¿é€’å¢å­åºåˆ—ä¸ªæ•°å°±åº”è¯¥å¢åŠ äº†ã€‚
        å› æ­¤ï¼Œå…·ä½“çš„çŠ¶æ€è½¬ç§»å¦‚ä¸‹ï¼Œåœ¨nums[i] > nums[j]çš„å¤§å‰æä¸‹ï¼š
        - å¦‚æœdp[j] + 1 > dp[i]ï¼Œè¯´æ˜æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦å¢åŠ äº†ï¼Œdp[i] = dp[j] + 1ï¼Œé•¿åº¦å¢åŠ ï¼Œæ•°é‡ä¸å˜ count[i] = count[j]
        - å¦‚æœdp[j] + 1 == dp[i]ï¼Œè¯´æ˜æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦å¹¶æ²¡æœ‰å¢åŠ ï¼Œä½†æ˜¯å‡ºç°äº†é•¿åº¦ä¸€æ ·çš„æƒ…å†µï¼Œæ•°é‡å¢åŠ  count[i] += count[j]

        è®°å½•æœ€é•¿é€’å¢å­åºåˆ—çš„æœ€å¤§é•¿åº¦max_length
        éå†dpæ•°ç»„ï¼Œå¦‚æœdpæ•°ç»„è®°å½•çš„æœ€å¤§é•¿åº¦dp[i]ç­‰äºmax_lengthï¼Œå°†å¯¹åº”çš„æ•°é‡count[i]åŠ åˆ°ç»“æœresä¸­
        """
        n = len(nums)
        if n == 1:
            return 1
        dp = [1] * n
        count = [1] * n
        max_length = 0

        for i in range(1, n):
            for j in range(i):
                if nums[i] > nums[j]:
                    if dp[j] + 1 > dp[i]:
                        dp[i] = dp[j] + 1
                        count[i] = count[j]
                    elif dp[j] + 1 == dp[i]:
                        count[i] += count[j]
            max_length = max(max_length, dp[i])

        cnt = 0
        for i in dp:
            if i == max_length:
                cnt += count[i]

        return cnt
# leetcode submit region end(Prohibit modification and deletion)
